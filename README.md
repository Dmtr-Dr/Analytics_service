# Analytics_service
## Дизайн ML системы - Сервис аналитики для инвесторов - 1

### 1. Цели и предпосылки 
#### 1.1. Зачем идем в разработку продукта?  

- Бизнес-цель:
    Реализация MVP версии сервиса аналитики для инвесторов
- Почему станет лучше, чем сейчас, от использования ML:
    Внедрение методов машинного обучения в наш сервис аналитики позволит инвесторам получать более точные и прогнозируемые аналитические данные. ML-модели будут способствовать автоматическому выявлению трендов, анализу рисков и предоставлению персонализированных рекомендаций для оптимизации инвестиционных стратегий.
- Что будем считать успехом итерации с точки зрения бизнеса:
    1. Завершение разработки и успешный запуск MVP версии сервиса аналитики в установленные сроки.
    2. Положительные отзывы и обратная связь от первых пользователей сервиса, подчеркивающие удобство использования и ценность предоставляемой аналитической информации.
    3. Увеличение числа активных пользователей сервиса на 20% в первые три месяца после запуска.
    4. Повышение уровня вовлеченности пользователей, измеряемое по времени, проведенному на платформе, и частоте использования аналитических инструментов.

#### 1.2. Бизнес-требования и ограничения  

- Краткое описание БТ и ссылки на детальные документы с бизнес-требованиями:
    Проект направлен на создание сервиса аналитики для инвесторов. Бизнес-требования подробно описаны в [документе](https://accurate-napkin-52f.notion.site/04b4b12e93e24a5d9f6a2106140618fb?pvs=4)
- Бизнес-ограничения:
    1. Для первой версии необходимо использовать только российские источники данных.
    2. Интеграция с другими системами ограничена сторонними API. 
- Что мы ожидаем от конкретной итерации:
    1. Разработка и успешный запуск MVP версии сервиса аналитики для инвесторов.
    2. Получение обратной связи от пользователей для дальнейшего улучшения продукта.  
- Описание бизнес-процесса пилота, насколько это возможно - как именно мы будем использовать модель в существующем бизнес-процессе?
    В рамках пилота модель будет использоваться для предоставления рекомендаций инвесторам на основе анализа новостей, показателей и рыночных трендов. Модель будет интегрирована в интерфейс сервиса аналитики, предоставляя пользователям доступ к новым функциональностям.  
- Что считаем успешным пилотом? Критерии успеха и возможные пути развития проекта:
    1. Увеличение активности пользователей после внедрения модели.
    2. Улучшение показателей вовлеченности пользователей.
    3. Получение положительных отзывов и обратной связи.
  Возможные пути развития:
    1. Масштабирование сервиса на основе успешных результатов пилота.
    2. Исследование возможностей интеграции с дополнительными источниками данных.
    3. Доработка модели на основе обратной связи и изменений в требованиях пользователей.

#### 1.3. Что входит в скоуп проекта/итерации, что не входит   

- На закрытие каких БТ подписываемся в данной итерации:
    Подписываемся на закрытие бизнес-требований, связанных с разработкой и внедрением модели аналитики для инвесторов. Это может включать в себя успешную обучение модели, ее интеграцию в продукт и проверку на соответствие заданным бизнес-критериям.
- Что не будет закрыто:
    В данной итерации, возможно, не будут закрыты все технические задачи, связанные с оптимизацией производительности модели или ее доработкой после получения обратной связи от пользователей.
- Описание результата с точки зрения качества кода и воспроизводимости решения:
    Код должен соответствовать стандартам оформления, быть документированным и легко читаемым. Модель должна быть воспроизводимой, что позволит другим специалистам легко повторить эксперименты и внести улучшения.
- Описание планируемого технического долга (что оставляем для дальнейшей продуктивизации):
    Могут остаться некоторые аспекты технического долга, такие как оптимизация производительности, дополнительная настройка гиперпараметров, улучшение обработки данных. Также, возможно, потребуется провести дополнительные исследования для улучшения точности модели. Эти аспекты могут оставаться для будущих итераций с учетом обратной связи от пользователей и изменений в требованиях.

#### 1.4. Предпосылки решения  

- Описание всех общих предпосылок решения, используемых в системе – с обоснованием от запроса бизнеса:
    Для обучения модели используются исторические данные с различных новостных источников с 2000 года по 2024 год. Кроме того, возможно использование показателей компании, отчетности, а также метрик, полученных на основе анализа котировок активов. Прогнозируется изменения стоимости котировок на временной промежуток 1 час, 1 день, 1 месяц после выхода новости. Модель будет создаваться индивидуально под каждый сектор экономики.

### 2. Методология `Data Scientist`     

#### 2.1. Постановка задачи  

  Разрабатываем модель для прогнозирования изменения стоимости котировок с использованием временных рядов и других соответствующих методов машинного обучения. Это позволит инвесторам получать предсказания относительно будущих изменений рыночных условий, что может быть ключевой информацией для принятия инвестиционных решений.

#### 2.2. Блок-схема решения  

#### 2.3. Этапы решения задачи `Data Scientist`  

  Этап 1 - Парсинг данных
  
| Название данных  | Есть ли данные ( источник данных)  | Требуемый ресурс для получения данных (какие роли нужны) | Проверено ли качество данных (да, нет) |
| ------------- | ------------- | ------------- | ------------- |
| Новости | Lenta  | DE | + |

На выходе: Датасет с новостями для обучения модели

  Этап 2 - Получение котировок
| Название данных  | Есть ли данные ( источник данных)  | Требуемый ресурс для получения данных (какие роли нужны) | Проверено ли качество данных (да, нет) |
| ------------- | ------------- | ------------- | ------------- |
| Котировки | Tinkoff Invest API  | DE | + |

На выходе: Датасет с котировками для обучения модели

  Этап 3 - Подготовка данных

| Признак 1 | Признак 2  | Изменение стоимости | 
| ------------- | ------------- | ------------- |
| Новости | Индикаторы | Число |

На выходе: Итоговый датасет для обучения модели

  Этап 4 - Обучение модели
  Этап 5 - Разработка базы данных
  Этап 6 - Разработка бота
  Этап 7 - Интеграция модели в бот




*Этап 1 - это обычно, подготовка данных.*  

В этом этапе должно быть следующее:  

- Данные и сущности, на которых будет обучаться ваша модель машинного обучения. Отдельная таблица для целевой переменной (либо целевых переменных разных этапов), отдельная таблица – для признаков.  
  
| Название данных  | Есть ли данные в компании (если да, название источника/витрин) | Требуемый ресурс для получения данных (какие роли нужны) | Проверено ли качество данных (да, нет) |
| ------------- | ------------- | ------------- | ------------- |
| Продажи | DATAMARTS_SALES_PER_DAY  | DE/DS | + |
| ...  | ...  | ... | ... |
 
- Краткое описание результата этапа - что должно быть на выходе: витрины данных, потоки данных, др.  
  
> Чаще всего заполнение раздела невозможно без EDA.


 
Описание техники **для каждого этапа** должно включать описание **отдельно для MVP** и **отдельно для бейзлайна**:  

- Описание формирования выборки для обучения, тестирования и валидации. Выбор репрезентативных данных для экспериментов, обучения и подготовки пилота (от бизнес-цели и репрезентативности данных с технической точки зрения) `Data Scientist`    
- Горизонт, гранулярность, частоту необходимого пересчета прогнозных моделей `Data Scientist`   
- Определение целевой переменной, согласованное с бизнесом `Data Scientist`   
- Какие метрики качества используем и почему они связаны с бизнес-результатом, обозначенным `Product Owner` в разделах `1` и `3`. Пример - WAPE <= 50% для > 80% категорий, bias ~ 0. Возможна формулировка в терминах относительно бейзлайна, количественно. Для бейзлайна могут быть свои целевые метрики, а может их вообще не быть (если это обосновано) `Data Scientist`   
- Необходимый результат этапа. Например, необходимым результатом может быть не просто достижение каких-либо метрик качества, а включение в модели определенных факторов (флаг промо для прогноза выручки, др.) `Data Scientist`    
- Какие могут быть риски и что планируем с этим делать. Например, необходимый для модели фактор (флаг промо) окажется незначимым для большинства моделей. Или для 50% моделей будет недостаточно данных для оценки `Data Scientist`    
- Верхнеуровневые принципы и обоснования для: feature engineering, подбора алгоритма решения, техники кросс-валидации, интерпретации результата (если применимо).  
- Предусмотрена ли бизнес-проверка результата этапа и как будет проводиться `Data Scientist` & `Product Owner`  
  
### 3. Подготовка пилота  
  
#### 3.1. Способ оценки пилота  
  
- Краткое описание предполагаемого дизайна и способа оценки пилота `Product Owner`, `Data Scientist` with `AB Group` 
  
#### 3.2. Что считаем успешным пилотом  
  
Формализованные в пилоте метрики оценки успешности `Product Owner`   
  
#### 3.3. Подготовка пилота  
  
- Что можем позволить себе, исходя из ожидаемых затрат на вычисления. Если исходно просчитать сложно, то описываем этап расчетов ожидаемой вычислительной сложности на эксперименте с бейзлайном. И предусматриваем уточнение параметров пилота и установку ограничений по вычислительной сложности моделей. `Data Scientist` 

### 4. Внедрение `для production систем, если требуется`    

> Заполнение раздела 4 требуется не для всех дизайн документов. В некоторых случаях результатом итерации может быть расчет каких-то значений, далее используемых в бизнес-процессе для пилота.  
  
#### 4.1. Архитектура решения   
  
- Блок схема и пояснения: сервисы, назначения, методы API `Data Scientist`  
  
#### 4.2. Описание инфраструктуры и масштабируемости 
  
- Какая инфраструктура выбрана и почему `Data Scientist` 
- Плюсы и минусы выбора `Data Scientist` 
- Почему финальный выбор лучше других альтернатив `Data Scientist` 
  
#### 4.3. Требования к работе системы  
  
- SLA, пропускная способность и задержка `Data Scientist`  
  
#### 4.4. Безопасность системы  
  
- Потенциальная уязвимость системы `Data Scientist`  
  
#### 4.5. Безопасность данных   
  
- Нет ли нарушений GDPR и других законов `Data Scientist`  
  
#### 4.6. Издержки  
  
- Расчетные издержки на работу системы в месяц `Data Scientist`  
  
#### 4.5. Integration points  
  
- Описание взаимодействия между сервисами (методы API и др.) `Data Scientist`  
  
#### 4.6. Риски  
  
- Описание рисков и неопределенностей, которые стоит предусмотреть `Data Scientist`   
  
